@if(win){
  <div class="window"
       [class.active]="win.active"
       [style.left.px]="win.position.x"
       [style.top.px]="win.position.y"
       [style.width.px]="win.size.width"
       [style.height.px]="win.size.height"
       (mousedown)="focusWindow(win.id)">
    <div class="title-bar" (mousedown)="startDrag($event, win.id)">
      <div class="d-flex flex-row">
        <app-win-icon [appConfig]="getAppWindowConfigOfWindow(win)"></app-win-icon>
        <span class="mx-1">{{win.title}}</span>
      </div>
      <div class="d-flex flex-row">
        <button class="mini-btn" >
          <nz-icon nzType="line" style="font-size: 14px" nzTheme="outline"
                   (click)="minimizeWindow(win.id)"
          />
        </button>
        <button class="max-btn" >
          <nz-icon nzType="border" style="font-size: 14px" nzTheme="outline"
                   (click)="maximizeWindow(win.id)"
          />
        </button>
        <button class="close-btn" (click)="closeWindow(win.id)">Ã—</button>
      </div>
    </div>
    <div class="content">
      @if(win.component){
        <ng-container *ngComponentOutlet="win.component"></ng-container>
      }
    </div>
      <div class="resize-handle top-left" (mousedown)="startResize($event, win.id, 'top-left')"></div>
      <div class="resize-handle top" (mousedown)="startResize($event, win.id, 'top')"></div>
      <div class="resize-handle top-right" (mousedown)="startResize($event, win.id, 'top-right')"></div>
      <div class="resize-handle right" (mousedown)="startResize($event, win.id, 'right')"></div>
      <div class="resize-handle bottom-right" (mousedown)="startResize($event, win.id, 'bottom-right')"></div>
      <div class="resize-handle bottom" (mousedown)="startResize($event, win.id, 'bottom')"></div>
      <div class="resize-handle bottom-left" (mousedown)="startResize($event, win.id, 'bottom-left')"></div>
      <div class="resize-handle left" (mousedown)="startResize($event, win.id, 'left')"></div>
  </div>
}
