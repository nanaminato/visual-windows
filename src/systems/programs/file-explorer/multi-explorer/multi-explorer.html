<div class="program-container" [class.active]="active">
    <div class="program-header" >
        <div class="d-flex flex-row">
            @for(fileExplorer of fileExplorers; track fileExplorer.fileExplorerId){
                <div
                    class="tab"
                    [class.active]="selectedIndex === $index"
                    (click)="selectTab($index)">
                    <span class="tab-title">{{ getTitle(fileExplorer) || '无标题' }}</span>
                    <button class="close-btn" (click)="closeTab($index, $event)">
                        <nz-icon nzType="close"  />
                    </button>
                </div>
            }
            <button class="add-btn" (click)="openNewFileExplorer()">＋</button>
        </div>
        <div class="flex-grow-1 touch-drag" (mousedown)="startDrag($event)" (touchstart)="touchDrag($event)">

        </div>
        <div class="d-flex flex-row ">
            <button class="mini-btn" (click)="minimizeWindow()">
                <nz-icon nzType="line"
                />
            </button>
            <button class="max-btn" (click)="maximizeWindow()">
                <nz-icon nzType="border"
                />
            </button>
            <button class="close-btn " (click)="closeWindow()">
                <nz-icon nzType="close"  />
            </button>
        </div>
    </div>

    <div class="program-content">
        @for(fileExplorer of fileExplorers; track fileExplorer.fileExplorerId){
            <ng-container >
                <div [hidden]="selectedIndex !== $index" class="tab-panel">
                    <file-explorer #fileExplorerComp
                        [winId]="id!"
                        [uuid]="fileExplorer.fileExplorerId"
                        [currentPath]="fileExplorer.initPath"
                        (titleChange)="handleTitleChange($event)">
                    </file-explorer>
                </div>
            </ng-container>
        }
        @if(fileExplorers.length===0){
            <div class="empty-state">
                没有打开的标签页
            </div>
        }
    </div>
</div>
