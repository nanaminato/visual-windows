<div class="file-browser">
    <div>
        <div class="navigator">
            <div class="navigator-item-group">
                <button [disabled]="!canBack()" [class.disabled]="!canBack()" >
                    <nz-icon nzType="arrow-left" nzTheme="outline" (click)="back()"/>
                </button>
                <button [disabled]="!canForward()" [class.disabled]="!canForward()" >
                    <nz-icon nzType="arrow-right" nzTheme="outline" (click)="forward()"/>
                </button>
                <button [disabled]="!canStepBack()" [class.disabled]="!canStepBack()" >
                    <nz-icon nzType="arrow-up" nzTheme="outline" (click)="stepBack()"/>
                </button>

                <button>
                    <!-- todo 图标替换为更合适的图标 -->
                    <nz-icon nzType="retweet" nzTheme="outline" (click)="refresh()" />
                </button>
            </div>
            <div class="address-bar" >
                @if(editing){
                    <!-- 编辑模式：input -->
                    <input #addressInput nz-input type="text"
                           (keydown.enter)="onEnterFromInput()"
                           (blur)="onInputBlur()"
                           [(ngModel)]="navigatePath" />
                    <button class="border-none bg-transparent">
                        <nz-icon nzType="close" nzTheme="outline" (click)="clearPath()"/>
                    </button>
                }@else{
                    <div class="breadcrumbs-address">
                        <div class="breadcrumbs" (click)="enterEditMode($event)">
                            @for(b of breadcrumbs; track b){
                                <button class="breadcrumb-item"
                                        (click)="onBreadcrumbClick(b.path, $event)">
                                    {{ b.name }}
                                </button>
                            }
                        </div>
                        <button class="border-none bg-transparent" (click)="enterEditMode($event)">
                            <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
                        </button>
                    </div>
                }
            </div>

            <div class="search-box">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" nz-input [placeholder]="getSearchPlaceHolder()" />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <nz-icon nzType="search" />
                </ng-template>
            </div>
        </div>
        <div class="quick-tool">
            <div class="normal-tools">
                <div class="create-new">

                </div>
                <button>
                    <nz-icon nzType="scissor" nzTheme="outline" />
                </button>
                <button>
                    <nz-icon nzType="copy" nzTheme="outline" />
                </button>
                <button>
                    <!-- todo 替换更贴切的图标                    -->
                    <nz-icon nzType="snippets" nzTheme="outline" />
                </button>
                <button>
                    <nz-icon nzType="form" nzTheme="outline" />
                </button>
                <button>
                    <nz-icon nzType="share-alt" nzTheme="outline" />
                </button>
                <button>
                    <nz-icon nzType="delete" nzTheme="outline" />
                </button>
                <button>
                    <nz-icon nzType="more" nzTheme="outline" />
                </button>
            </div>
            <div class="more-information">
                <button class="border-none bg-transparent" (click)="showInfo()">
                    <nz-icon nzType="bars" nzTheme="outline" />
                     详细信息
                </button>
            </div>
        </div>
    </div>
    <nz-splitter class="d-flex flex-grow-1">
        <nz-splitter-panel nzDefaultSize="18%" nzMin="15%" nzMax="70%">
            <app-entry-root (folderSelected)="onFolderSelected($event)"></app-entry-root>
        </nz-splitter-panel>
        <nz-splitter-panel >
            @if(driverView){
                <app-driver-list-view [drivers]="drivers" (driverNavigate)="onDriverNavigate($event)"></app-driver-list-view>
            }@else{
                <app-folder-list-view (refreshRequest)="onRefreshRequest()" [currentPath]="currentPath"  [files]="files" (fileProcess)="onFileNavigate($event)"> </app-folder-list-view>
            }
        </nz-splitter-panel>
    </nz-splitter>
</div>
