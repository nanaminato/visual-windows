<div class="file-browser" >
    <div class="d-flex flex-column" style="height: 88px">
        <div class="navigator">
            <div class="navigator-item-group">
                <button [disabled]="!canBack()" [class.disabled]="!canBack()" >
                    <nz-icon nzType="arrow-left" nzTheme="outline" (click)="back()"/>
                </button>
                <button [disabled]="!canForward()" [class.disabled]="!canForward()" >
                    <nz-icon nzType="arrow-right" nzTheme="outline" (click)="forward()"/>
                </button>
                <button [disabled]="!canStepBack()" [class.disabled]="!canStepBack()" >
                    <nz-icon nzType="arrow-up" nzTheme="outline" (click)="stepBack()"/>
                </button>

                <button>
                    <!-- todo 图标替换为更合适的图标 -->
                    <nz-icon nzType="retweet" nzTheme="outline" (click)="refresh()" />
                </button>
            </div>
            <div class="address-bar" >
                @if(editing){
                    <!-- 编辑模式：input -->
                    <input #addressInput nz-input type="text"
                           (keydown.enter)="onEnterFromInput()"
                           (blur)="onInputBlur()"
                           [(ngModel)]="navigatePath" />
                    <button class="border-none bg-transparent">
                        <nz-icon nzType="close" nzTheme="outline" (click)="clearPath()"/>
                    </button>
                }@else{
                    <div class="breadcrumbs-address">
                        <div class="breadcrumbs" (click)="enterEditMode($event)">
                            @for(b of breadcrumbs; track b.path){
                                <button class="breadcrumb-item"
                                        (click)="onBreadcrumbClick(b.name, b.path, $event)">
                                    {{ b.name }}
                                </button>
                            }
                        </div>
                        <button class="border-none bg-transparent" (click)="enterEditMode($event)">
                            <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
                        </button>
                    </div>
                }
            </div>

            <div class="search-box">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" nz-input [placeholder]="getSearchPlaceHolder()" />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <nz-icon nzType="search" />
                </ng-template>
            </div>
        </div>
        <div class="quick-tool">
            <div class="normal-tools">
                <div class="create-new">

                </div>
                <button (click)="cutFile()" [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
                    <nz-icon nzType="scissor" nzTheme="outline" />
                </button>
                <button (click)="copyFile()" [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
                    <nz-icon nzType="copy" nzTheme="outline" />
                </button>
                <button (click)="pasteFile()" [class.disabled]="!canPaste" [disabled]="!canPaste">
                    <!-- todo 替换更贴切的图标                    -->
                    <nz-icon nzType="snippets" nzTheme="outline" />
                </button>
                <button [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
<!--                    重命名-->
                    <nz-icon nzType="form" nzTheme="outline" />
                </button>
                <button [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
<!--                    分享-->
                    <nz-icon nzType="share-alt" nzTheme="outline" />
                </button>
                <button (click)="deleteFile()" [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
<!--                    删除-->
                    <nz-icon nzType="delete" nzTheme="outline" />
                </button>
                <button [class.disabled]="!fileActionAvailable" [disabled]="!fileActionAvailable">
<!--                    更多-->
                    <nz-icon nzType="more" nzTheme="outline" />
                </button>
            </div>
            <div class="more-information">
                <button class="border-none bg-transparent" (click)="showInfo()">
                    <nz-icon nzType="bars" nzTheme="outline" />
                     详细信息
                </button>
            </div>
        </div>
    </div>
    <div class="w-100 file-tree-and-view">
        <as-split gutterSize="2" direction="horizontal" class="as-split">
            <as-split-area size="20"  class="as-split-area">
                <app-entry-root (folderSelected)="onFolderSelected($event)"></app-entry-root>
            </as-split-area>
            <as-split-area class="as-split-area">
                @if(driverView){
                    <app-driver-list-view [drivers]="drivers" (driverNavigate)="onDriverNavigate($event)"></app-driver-list-view>
                }@else{
                    <app-folder-list-view
                        (refreshRequest)="onRefreshRequest()"
                        [currentPath]="currentPath"
                        [files]="files"
                        [canPaste]="canPaste"
                        (fileAction)="onFileAction($event)"
                        (fileSelectChange)="onFileSelectChange($event)"
                        (fileProcess)="onFileNavigate($event)"> </app-folder-list-view>
                }
            </as-split-area>
        </as-split>
    </div>

</div>
